<!DOCTYPE html>
<html lang="{{ get_locale() }}" dir="{{ 'rtl' if get_locale() == 'ar' else 'ltr' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ _('Marine Waste Tracker') }}</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/logo.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- ÿßÿ≥ÿ™Ÿäÿ±ÿßÿØ ŸÖŸÉÿ™ÿ®ÿßÿ™ Leaflet.js ŸÑŸÑÿÆÿ±ÿßÿ¶ÿ∑ -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    
    <!-- ÿ•ÿ∂ÿßŸÅÿ© Font Awesome ŸÑŸÑÿ£ŸäŸÇŸàŸÜÿßÿ™ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÉÿ™ÿ®ÿ© SweetAlert2 ŸÑŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑÿ¨ŸÖŸäŸÑÿ© -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <header>
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <div style="display: flex; align-items: center; gap: 10px;">
    <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo" style="height: 80px; width: 80px;">
    <span style="font-size: 2rem; font-weight: bold;">{{ _('Marine Waste Tracker') }}</span>
</div>
<p class="subtitle">{{ _('Towards clean and sustainable seas') }}</p>
            </div>
            <!-- Language switcher: handled by JS, no action needed -->
<select name="lang" onchange="window.location.href='/set_language/' + this.value + '?next=' + encodeURIComponent(window.location.pathname); return false;" style="margin: 4px; font-size: 0.85em; width: 180px; padding: 3px 8px; border-radius: 5px;">
    <option value="" disabled {% if get_locale() not in ['ar', 'en'] %}selected{% endif %}>{{ _('Select Language') }}</option>
    <option value="ar" {% if get_locale() == 'ar' %}selected{% endif %}>{{ _('Arabic') }}</option>
    <option value="en" {% if get_locale() == 'en' %}selected{% endif %}>{{ _('English') }}</option>
</select>
        </div>
    </header>

    <main>
        <!-- ÿÆÿ±Ÿäÿ∑ÿ© ÿ™ŸÅÿßÿπŸÑŸäÿ© -->
        <div id="map-container">
            <div id="map"></div>
            <div id="map-controls">
                <button onclick="mapFunctions.getLocation()" class="map-control-btn" data-action="get-location">
                    <i class="fas fa-location-dot"></i> {{ _('Get my location') }}
                </button>
                <button onclick="mapFunctions.resetMapView()" class="map-control-btn">
                    <i class="fas fa-arrows-rotate"></i> {{ _('Reset') }}
                </button>
                <button onclick="statisticsFunctions.showStatistics()" class="map-control-btn">
                    <i class="fas fa-chart-bar"></i> {{ _('Statistics') }}
                </button>
            </div>
            
            <!-- ŸÅŸÑÿßÿ™ÿ± -->
            <div class="filters">
                <select id="pollutionFilter" onchange="applyFilters()">
                    <option value="">{{ _('All pollution types') }}</option>
                    <option value="plastic">{{ _('Plastic') }}</option>
                    <option value="oil">{{ _('Oil') }}</option>
                    <option value="chemical">{{ _('Chemical') }}</option>
                    <option value="other">{{ _('Other') }}</option>
                </select>
                
                <select id="severityFilter" onchange="applyFilters()">
                    <option value="">{{ _('All severity levels') }}</option>
                    <option value="low">{{ _('Low') }}</option>
                    <option value="medium">{{ _('Medium') }}</option>
                    <option value="high">{{ _('High') }}</option>
                </select>
                
                <select id="timeFilter" onchange="applyFilters()">
                    <option value="">{{ _('All periods') }}</option>
                    <option value="7">{{ _('Last 7 days') }}</option>
                    <option value="30">{{ _('Last 30 days') }}</option>
                    <option value="90">{{ _('Last 3 months') }}</option>
                </select>
            </div>
        </div>
        
        <!-- ŸÜŸÖŸàÿ∞ÿ¨ ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ -->
        <div class="report-form">
            <h2><i class="fas fa-plus-circle"></i> {{ _('Add a new pollution report') }}</h2>
            <p class="form-instructions">üìç {{ _('Click on the map to select the location automatically') }}</p>
            
            <form id="reportForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="latitude">{{ _('Latitude') }}</label>
                    <input type="text" id="latitude" name="latitude" placeholder="{{ _('Will be filled automatically') }}" readonly required>
                </div>
                
                <div class="form-group">
                    <label for="longitude">{{ _('Longitude') }}</label>
                    <input type="text" id="longitude" name="longitude" placeholder="{{ _('Will be filled automatically') }}" readonly required>
                </div>
                
                <div class="form-group">
                    <label for="description">{{ _('Problem description') }}</label>
                    <textarea id="description" name="description" placeholder="{{ _('Enter a detailed description of the problem...') }}" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="pollutionType">{{ _('Pollution type') }}</label>
                    <select id="pollutionType" name="pollutionType" required>
                        <option value="">{{ _('Select pollution type') }}</option>
                        <option value="plastic">{{ _('Plastic') }}</option>
                        <option value="oil">{{ _('Oil') }}</option>
                        <option value="chemical">{{ _('Chemical') }}</option>
                        <option value="other">{{ _('Other') }}</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="severity">{{ _('Severity level') }}</label>
                    <select id="severity" name="severity" required>
                        <option value="low">{{ _('Low') }}</option>
                        <option value="medium">{{ _('Medium') }}</option>
                        <option value="high">{{ _('High') }}</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="images" class="file-input-label">
                        <i class="fas fa-camera"></i> {{ _('Choose images') }}
                    </label>
                    <input type="file" id="images" name="images" accept="image/*" class="file-input" multiple>
                    <span id="file-name" class="file-name">{{ _('No image selected') }}</span>
                    <div id="preview-container" class="preview-container"></div>
                </div>

                <button type="submit" class="submit-btn">
                    <i class="fas fa-paper-plane"></i> {{ _('Submit Report') }}
                </button>
            </form>
        </div>
    </main>

    <!-- Image popup window -->
    <div id="popupOverlay" class="popup-overlay">
        <button class="popup-close" onclick="closePopup()">
            <i class="fas fa-times"></i> {{ _('Close') }}
        </button>
        <img id="popupImage" class="popup-image" src="" alt="{{ _('Enlarged image') }}">
    </div>

    <!-- Loading indicator -->
    <div id="loading-indicator" class="loading-indicator" style="display: none;">
        <div class="spinner"></div>
        <p>{{ _('Loading...') }}</p>
    </div>

    <!-- Awareness section -->
    <div class="awareness-section">
        <h2><i class="fas fa-lightbulb"></i> {{ _('Environmental Awareness') }}</h2>
        <div class="awareness-grid">
            <div class="awareness-card">
                <i class="fas fa-trash-alt"></i>
                <h3>{{ _('Impact of Marine Waste') }}</h3>
                <p>{{ _('Marine waste negatively affects marine life and the entire ecosystem. Thousands of marine creatures die annually due to plastic ingestion.') }}</p>
            </div>
            <div class="awareness-card">
                <i class="fas fa-recycle"></i>
                <h3>{{ _('How can you help?') }}</h3>
                <p>{{ _('Reduce plastic use, recycle, join beach cleanups, and report marine pollution when you see it.') }}</p>
            </div>
            <div class="awareness-card">
                <i class="fas fa-hand-holding-water"></i>
                <h3>{{ _('Protecting the Marine Environment') }}</h3>
                <p>{{ _('Seas and oceans are the source of life on Earth. Protecting them is a shared responsibility for a sustainable future.') }}</p>
            </div>
        </div>
    </div>

    <footer>
        <p>{{ _('All rights reserved ¬© 2025 | Powered by Maroua Benzaoui') }}</p>
    </footer>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>


